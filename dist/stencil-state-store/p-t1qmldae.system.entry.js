System.register(["./p-39cecbe8.system.js","./p-f8d8e447.system.js"],function(e){"use strict";var t,n,r,o,i,s,c,u;return{setters:[function(e){t=e.r;n=e.h;r=e.c},function(e){o=e.C;i=e.P;s=e.S;c=e.g;u=e.a}],execute:function(){var a=undefined&&undefined.__decorate||function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)if(s=e[c])i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i;return o>3&&i&&Object.defineProperty(t,n,i),i};var f=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var p=function(){function e(e){t(this,e);this.prop=null}e.prototype.injectStore=function(e){console.log("Store injected via method injection.",e)};e.prototype.onDefaultStoreProvided=function(e){var t=this;console.log("After store is injected, instance method is invoked.",e);this.store=e;this.subscription=this.store.subscribe(function(e){t.counter=e.counter})};e.prototype.disconnectedCallback=function(){this.subscription.unsubscribe()};e.prototype.increase=function(){var e=this.store.snapshot();e.counter++;this.store.patch(e)};e.prototype.render=function(){return n("state-store-consumer",{consumer:this},n("div",null,"Current value rendered from consumer component: ",n("span",null,this.counter)),n("div",null,n("button",{onClick:this.increase.bind(this)},"Increase counter from consumer")),n("slot",null))};return e}();e("demo_consumer",p);a([o({name:"demo-store",callback:"onDefaultStoreProvided"}),f("design:type",Object)],p.prototype,"store",void 0);a([o({name:"demo-store",callback:function(e){console.log("After store is injected, callback function is invoked.",e)}}),f("design:type",Function),f("design:paramtypes",[Object]),f("design:returntype",void 0)],p.prototype,"injectStore",null);var d=undefined&&undefined.__decorate||function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)if(s=e[c])i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i;return o>3&&i&&Object.defineProperty(t,n,i),i};var l=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var h=function(){function e(e){t(this,e)}e.prototype.connectedCallback=function(){var e=this;this.subscription=this.store.subscribe(function(t){e.counter=t.counter})};e.prototype.disconnectedCallback=function(){this.subscription.unsubscribe()};e.prototype.increase=function(){var e=this.store.snapshot();e.counter++;this.store.patch(e)};e.prototype.render=function(){return n("state-store-provider",{provider:this},n("div",null,"Current value rendered from provider component: ",n("span",null,this.counter)),n("div",null,n("button",{onClick:this.increase.bind(this)},"Increase counter from provider")),n("slot",null))};return e}();e("demo_provider",h);d([i({name:"demo-store",defaults:{counter:1}}),l("design:type",Object)],h.prototype,"store",void 0);var b=function(){function e(){this._subject=new s;document.addEventListener("@runopencode:store:provider:register",this.onProviderRegistered.bind(this))}e.prototype.subscribe=function(e){return this._subject.subscribe(e)};e.prototype.onProviderRegistered=function(){this._subject.next()};e.getInstance=function(){if(!e._instance){e._instance=new e}return e._instance};return e}();var v=function(){function e(e){t(this,e);this.requests=[];this.subscription=null;this.request=r(this,"runopencode:store:consumer:request",7)}e.prototype.connectedCallback=function(){var e=this;this.requests=c(this.consumer);this.require();if(0===this.requests.length){return}this.subscription=b.getInstance().subscribe(function(){e.require()})};e.prototype.disconnectedCallback=function(){if(this.subscription){this.subscription.unsubscribe();this.subscription=null}this.requests=[]};e.prototype.render=function(){return n("slot",null)};e.prototype.require=function(){var e=this;var t=[];this.requests.forEach(function(n){if(e.request.emit(n).defaultPrevented){t.push(n)}});t.forEach(function(t){e.requests.splice(e.requests.indexOf(t),1)});if(0===this.requests.length){this.subscription.unsubscribe();this.subscription=null}};return e}();e("state_store_consumer",v);var y=function(){function e(e){t(this,e);this.register=r(this,"@runopencode:store:provider:register",7)}e.prototype.connectedCallback=function(){this.stores=u(this.provider);this.register.emit()};e.prototype.onRequest=function(e){var t=e.detail;if(!this.stores.has(t.name)){return}e.stopPropagation();e.preventDefault();var n=this.stores.get(t.name);if(t.property){t.consumer[t.property]=n}if(t.method){t.method.apply(t.consumer,[n])}if(t.callback){t.callback.apply(t.consumer,[n])}};e.prototype.render=function(){return n("slot",null)};return e}();e("state_store_provider",y)}}});
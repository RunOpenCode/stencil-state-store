var __extends=this&&this.__extends||function(){var t=function(r,e){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)if(r.hasOwnProperty(e))t[e]=r[e]};return t(r,e)};return function(r,e){t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();System.register([],function(t){"use strict";return{execute:function(){t({C:n,P:J,a:q,g:o});var r=function(){function t(t,r,e,n,o){this._name=t;this._consumer=r;this._property=e;this._method=n;this._callback=o}Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"consumer",{get:function(){return this._consumer},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"property",{get:function(){return this._property},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"method",{get:function(){return this._method},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"callback",{get:function(){return this._callback},enumerable:true,configurable:true});return t}();var e=Symbol("@runopencode:state:consume:requests");function n(t){return function(r,n,o){t=Object.assign({callback:null},t);var s=Reflect.getMetadata(e,r)||[];var u=new i(t.name,n,t.callback,o?"method":"property");s.push(u);Reflect.defineMetadata(e,s,r)}}function o(t){var n=[];var o=Reflect.getMetadata(e,t);o.forEach(function(e){var o=e.callback;if("string"===typeof e.callback){o=t[e.callback]}var i=new r(e.name,t,"property"===e.type?e.property:null,"method"===e.type?t[e.property]:null,o);n.push(i)});return n}var i=function(){function t(t,r,e,n){this._name=t;this._property=r;this._callback=e;this._type=n}Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"property",{get:function(){return this._property},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"callback",{get:function(){return this._callback},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:true,configurable:true});return t}();function s(t){return typeof t==="function"}var u=false;var c={Promise:undefined,set useDeprecatedSynchronousErrorHandling(t){if(t){var r=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+r.stack)}else if(u){console.log("RxJS: Back to a better error behavior. Thank you. <3")}u=t},get useDeprecatedSynchronousErrorHandling(){return u}};function a(t){setTimeout(function(){throw t},0)}var f={closed:true,next:function(t){},error:function(t){if(c.useDeprecatedSynchronousErrorHandling){throw t}else{a(t)}},complete:function(){}};var h=Array.isArray||function(t){return t&&typeof t.length==="number"};function p(t){return t!==null&&typeof t==="object"}function l(t){Error.call(this);this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,r){return r+1+") "+t.toString()}).join("\n  "):"";this.name="UnsubscriptionError";this.errors=t;return this}l.prototype=Object.create(Error.prototype);var b=l;var y=function(){function t(t){this.closed=false;this._parentOrParents=null;this._subscriptions=null;if(t){this._unsubscribe=t}}t.prototype.unsubscribe=function(){var r;if(this.closed){return}var e=this,n=e._parentOrParents,o=e._unsubscribe,i=e._subscriptions;this.closed=true;this._parentOrParents=null;this._subscriptions=null;if(n instanceof t){n.remove(this)}else if(n!==null){for(var u=0;u<n.length;++u){var c=n[u];c.remove(this)}}if(s(o)){try{o.call(this)}catch(t){r=t instanceof b?d(t.errors):[t]}}if(h(i)){var u=-1;var a=i.length;while(++u<a){var f=i[u];if(p(f)){try{f.unsubscribe()}catch(t){r=r||[];if(t instanceof b){r=r.concat(d(t.errors))}else{r.push(t)}}}}}if(r){throw new b(r)}};t.prototype.add=function(r){var e=r;if(!r){return t.EMPTY}switch(typeof r){case"function":e=new t(r);case"object":if(e===this||e.closed||typeof e.unsubscribe!=="function"){return e}else if(this.closed){e.unsubscribe();return e}else if(!(e instanceof t)){var n=e;e=new t;e._subscriptions=[n]}break;default:{throw new Error("unrecognized teardown "+r+" added to Subscription.")}}var o=e._parentOrParents;if(o===null){e._parentOrParents=this}else if(o instanceof t){if(o===this){return e}e._parentOrParents=[o,this]}else if(o.indexOf(this)===-1){o.push(this)}else{return e}var i=this._subscriptions;if(i===null){this._subscriptions=[e]}else{i.push(e)}return e};t.prototype.remove=function(t){var r=this._subscriptions;if(r){var e=r.indexOf(t);if(e!==-1){r.splice(e,1)}}};return t}();y.EMPTY=function(t){t.closed=true;return t}(new y);function d(t){return t.reduce(function(t,r){return t.concat(r instanceof b?r.errors:r)},[])}var _=typeof Symbol==="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();var v=function(t){__extends(r,t);function r(e,n,o){var i=t.call(this)||this;i.syncErrorValue=null;i.syncErrorThrown=false;i.syncErrorThrowable=false;i.isStopped=false;switch(arguments.length){case 0:i.destination=f;break;case 1:if(!e){i.destination=f;break}if(typeof e==="object"){if(e instanceof r){i.syncErrorThrowable=e.syncErrorThrowable;i.destination=e;e.add(i)}else{i.syncErrorThrowable=true;i.destination=new w(i,e)}break}default:i.syncErrorThrowable=true;i.destination=new w(i,e,n,o);break}return i}r.prototype[_]=function(){return this};r.create=function(t,e,n){var o=new r(t,e,n);o.syncErrorThrowable=false;return o};r.prototype.next=function(t){if(!this.isStopped){this._next(t)}};r.prototype.error=function(t){if(!this.isStopped){this.isStopped=true;this._error(t)}};r.prototype.complete=function(){if(!this.isStopped){this.isStopped=true;this._complete()}};r.prototype.unsubscribe=function(){if(this.closed){return}this.isStopped=true;t.prototype.unsubscribe.call(this)};r.prototype._next=function(t){this.destination.next(t)};r.prototype._error=function(t){this.destination.error(t);this.unsubscribe()};r.prototype._complete=function(){this.destination.complete();this.unsubscribe()};r.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;this._parentOrParents=null;this.unsubscribe();this.closed=false;this.isStopped=false;this._parentOrParents=t;return this};return r}(y);var w=function(t){__extends(r,t);function r(r,e,n,o){var i=t.call(this)||this;i._parentSubscriber=r;var u;var c=i;if(s(e)){u=e}else if(e){u=e.next;n=e.error;o=e.complete;if(e!==f){c=Object.create(e);if(s(c.unsubscribe)){i.add(c.unsubscribe.bind(c))}c.unsubscribe=i.unsubscribe.bind(i)}}i._context=c;i._next=u;i._error=n;i._complete=o;return i}r.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;if(!c.useDeprecatedSynchronousErrorHandling||!r.syncErrorThrowable){this.__tryOrUnsub(this._next,t)}else if(this.__tryOrSetError(r,this._next,t)){this.unsubscribe()}}};r.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber;var e=c.useDeprecatedSynchronousErrorHandling;if(this._error){if(!e||!r.syncErrorThrowable){this.__tryOrUnsub(this._error,t);this.unsubscribe()}else{this.__tryOrSetError(r,this._error,t);this.unsubscribe()}}else if(!r.syncErrorThrowable){this.unsubscribe();if(e){throw t}a(t)}else{if(e){r.syncErrorValue=t;r.syncErrorThrown=true}else{a(t)}this.unsubscribe()}}};r.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};if(!c.useDeprecatedSynchronousErrorHandling||!r.syncErrorThrowable){this.__tryOrUnsub(e);this.unsubscribe()}else{this.__tryOrSetError(r,e);this.unsubscribe()}}else{this.unsubscribe()}}};r.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(t){this.unsubscribe();if(c.useDeprecatedSynchronousErrorHandling){throw t}else{a(t)}}};r.prototype.__tryOrSetError=function(t,r,e){if(!c.useDeprecatedSynchronousErrorHandling){throw new Error("bad call")}try{r.call(this._context,e)}catch(r){if(c.useDeprecatedSynchronousErrorHandling){t.syncErrorValue=r;t.syncErrorThrown=true;return true}else{a(r);return true}}return false};r.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null;this._parentSubscriber=null;t.unsubscribe()};return r}(v);function g(t){while(t){var r=t.closed,e=t.destination,n=t.isStopped;if(r||n){return false}else if(e&&e instanceof v){t=e}else{t=null}}return true}function m(t,r,e){if(t){if(t instanceof v){return t}if(t[_]){return t[_]()}}if(!t&&!r&&!e){return new v(f)}return new v(t,r,e)}var E=typeof Symbol==="function"&&Symbol.observable||"@@observable";function S(){}function x(t){if(!t){return S}if(t.length===1){return t[0]}return function r(e){return t.reduce(function(t,r){return r(t)},e)}}var O=function(){function t(t){this._isScalar=false;if(t){this._subscribe=t}}t.prototype.lift=function(r){var e=new t;e.source=this;e.operator=r;return e};t.prototype.subscribe=function(t,r,e){var n=this.operator;var o=m(t,r,e);if(n){o.add(n.call(o,this.source))}else{o.add(this.source||c.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o))}if(c.useDeprecatedSynchronousErrorHandling){if(o.syncErrorThrowable){o.syncErrorThrowable=false;if(o.syncErrorThrown){throw o.syncErrorValue}}}return o};t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){if(c.useDeprecatedSynchronousErrorHandling){t.syncErrorThrown=true;t.syncErrorValue=r}if(g(t)){t.error(r)}else{console.warn(r)}}};t.prototype.forEach=function(t,r){var e=this;r=j(r);return new r(function(r,n){var o;o=e.subscribe(function(r){try{t(r)}catch(t){n(t);if(o){o.unsubscribe()}}},n,r)})};t.prototype._subscribe=function(t){var r=this.source;return r&&r.subscribe(t)};t.prototype[E]=function(){return this};t.prototype.pipe=function(){var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}if(t.length===0){return this}return x(t)(this)};t.prototype.toPromise=function(t){var r=this;t=j(t);return new t(function(t,e){var n;r.subscribe(function(t){return n=t},function(t){return e(t)},function(){return t(n)})})};return t}();O.create=function(t){return new O(t)};function j(t){if(!t){t=Promise}if(!t){throw new Error("no Promise impl found")}return t}function P(){Error.call(this);this.message="object unsubscribed";this.name="ObjectUnsubscribedError";return this}P.prototype=Object.create(Error.prototype);var T=P;var k=function(t){__extends(r,t);function r(r,e){var n=t.call(this)||this;n.subject=r;n.subscriber=e;n.closed=false;return n}r.prototype.unsubscribe=function(){if(this.closed){return}this.closed=true;var t=this.subject;var r=t.observers;this.subject=null;if(!r||r.length===0||t.isStopped||t.closed){return}var e=r.indexOf(this.subscriber);if(e!==-1){r.splice(e,1)}};return r}(y);var D=function(t){__extends(r,t);function r(r){var e=t.call(this,r)||this;e.destination=r;return e}return r}(v);var M=function(t){__extends(r,t);function r(){var r=t.call(this)||this;r.observers=[];r.closed=false;r.isStopped=false;r.hasError=false;r.thrownError=null;return r}r.prototype[_]=function(){return new D(this)};r.prototype.lift=function(t){var r=new H(this,this);r.operator=t;return r};r.prototype.next=function(t){if(this.closed){throw new T}if(!this.isStopped){var r=this.observers;var e=r.length;var n=r.slice();for(var o=0;o<e;o++){n[o].next(t)}}};r.prototype.error=function(t){if(this.closed){throw new T}this.hasError=true;this.thrownError=t;this.isStopped=true;var r=this.observers;var e=r.length;var n=r.slice();for(var o=0;o<e;o++){n[o].error(t)}this.observers.length=0};r.prototype.complete=function(){if(this.closed){throw new T}this.isStopped=true;var t=this.observers;var r=t.length;var e=t.slice();for(var n=0;n<r;n++){e[n].complete()}this.observers.length=0};r.prototype.unsubscribe=function(){this.isStopped=true;this.closed=true;this.observers=null};r.prototype._trySubscribe=function(r){if(this.closed){throw new T}else{return t.prototype._trySubscribe.call(this,r)}};r.prototype._subscribe=function(t){if(this.closed){throw new T}else if(this.hasError){t.error(this.thrownError);return y.EMPTY}else if(this.isStopped){t.complete();return y.EMPTY}else{this.observers.push(t);return new k(this,t)}};r.prototype.asObservable=function(){var t=new O;t.source=this;return t};return r}(O);t("S",M);M.create=function(t,r){return new H(t,r)};var H=function(t){__extends(r,t);function r(r,e){var n=t.call(this)||this;n.destination=r;n.source=e;return n}r.prototype.next=function(t){var r=this.destination;if(r&&r.next){r.next(t)}};r.prototype.error=function(t){var r=this.destination;if(r&&r.error){this.destination.error(t)}};r.prototype.complete=function(){var t=this.destination;if(t&&t.complete){this.destination.complete()}};r.prototype._subscribe=function(t){var r=this.source;if(r){return this.source.subscribe(t)}else{return y.EMPTY}};return r}(M);var A=function(t){__extends(r,t);function r(r){var e=t.call(this)||this;e._value=r;return e}Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:true,configurable:true});r.prototype._subscribe=function(r){var e=t.prototype._subscribe.call(this,r);if(e&&!e.closed){r.next(this._value)}return e};r.prototype.getValue=function(){if(this.hasError){throw this.thrownError}else if(this.closed){throw new T}else{return this._value}};r.prototype.next=function(r){t.prototype.next.call(this,this._value=r)};return r}(M);function R(t,r){return function e(n){if(typeof t!=="function"){throw new TypeError("argument is not a function. Are you looking for `mapTo()`?")}return n.lift(new V(t,r))}}var V=function(){function t(t,r){this.project=t;this.thisArg=r}t.prototype.call=function(t,r){return r.subscribe(new U(t,this.project,this.thisArg))};return t}();var U=function(t){__extends(r,t);function r(r,e,n){var o=t.call(this,r)||this;o.project=e;o.count=0;o.thisArg=n||o;return o}r.prototype._next=function(t){var r;try{r=this.project.call(this.thisArg,t,this.count++)}catch(t){this.destination.error(t);return}this.destination.next(r)};return r}(v);var Y=function(){function t(t){if(t===void 0){t=null}this._snapshot=t;this._subject=new A(t)}t.prototype.set=function(t){this._snapshot=t;this._subject.next(t)};t.prototype.patch=function(t){this._snapshot=Object.assign({},this._snapshot||{},t);this._subject.next(this._snapshot)};t.prototype.select=function(t){return this._subject.pipe(R(t))};t.prototype.snapshot=function(){return this._snapshot};t.prototype.subscribe=function(t){return this._subject.subscribe(t)};return t}();var C=Symbol("@runopencode:state:provide:registry");function J(t){return function r(e,n){t=Object.assign({defaults:null},t);var o="__"+n+"__";delete e.constructor.prototype[n];Object.defineProperty(e.constructor.prototype,n,{configurable:true,enumerable:true,get:function(){if(!this[o]){Object.defineProperty(this,o,{value:new Y(t.defaults),enumerable:false,writable:false})}return this[o]}});var i=Reflect.getMetadata(C,e)||new Map;i.set(t.name,n);Reflect.defineMetadata(C,i,e)}}function q(t){var r=Reflect.getMetadata(C,t);var e=new Map;r.forEach(function(r,n){e.set(n,t[r])});return e}}}});
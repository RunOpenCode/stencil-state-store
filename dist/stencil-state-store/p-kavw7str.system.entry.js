System.register(["./p-20d5631f.system.js","./p-1d5e271d.system.js"],(function(t){"use strict";var e,n,r,o,i,s,c,u,a;return{setters:[function(t){e=t.r;n=t.h;r=t.H;o=t.c},function(t){i=t.C;s=t.P;c=t.S;u=t.g;a=t.a}],execute:function(){var f=undefined&&undefined.__decorate||function(t,e,n,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)if(s=t[c])i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i;return o>3&&i&&Object.defineProperty(e,n,i),i};var p=undefined&&undefined.__metadata||function(t,e){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,e)};var l=t("demo_consumer",function(){function t(t){e(this,t);this.prop=null}t.prototype.injectStore=function(t){console.log("Store injected via method injection.",t)};t.prototype.onDefaultStoreProvided=function(t){var e=this;console.log("After store is injected, instance method is invoked.",t);this.store=t;this.subscription=this.store.subscribe((function(t){e.counter=t.counter}))};t.prototype.disconnectedCallback=function(){this.subscription.unsubscribe()};t.prototype.increase=function(){var t=this.store.snapshot();t.counter++;this.store.patch(t)};t.prototype.render=function(){return n(r,null,n("state-store-consumer",{consumer:this}),n("div",null,"Current value rendered from consumer component: ",n("span",null,this.counter)),n("div",null,n("button",{onClick:this.increase.bind(this)},"Increase counter from consumer")))};return t}());f([i({name:"demo-store",callback:"onDefaultStoreProvided"}),p("design:type",Object)],l.prototype,"store",void 0);f([i({name:"demo-store",callback:function(t){console.log("After store is injected, callback function is invoked.",t)}}),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],l.prototype,"injectStore",null);var d=undefined&&undefined.__decorate||function(t,e,n,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)if(s=t[c])i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i;return o>3&&i&&Object.defineProperty(e,n,i),i};var h=undefined&&undefined.__metadata||function(t,e){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,e)};var b=t("demo_provider",function(){function t(t){e(this,t)}t.prototype.connectedCallback=function(){var t=this;this.subscription=this.store.subscribe((function(e){t.counter=e.counter}))};t.prototype.disconnectedCallback=function(){this.subscription.unsubscribe()};t.prototype.increase=function(){var t=this.store.snapshot();t.counter++;this.store.patch(t)};t.prototype.render=function(){return n("state-store-provider",{provider:this},n("div",null,"Current value rendered from provider component: ",n("span",null,this.counter)),n("div",null,n("button",{onClick:this.increase.bind(this)},"Increase counter from provider")),n("slot",null))};return t}());d([s({name:"demo-store",defaults:{counter:1}}),h("design:type",Object)],b.prototype,"store",void 0);var y=function(){function t(){this._subject=new c}t.prototype.subscribe=function(t){return this._subject.subscribe(t)};t.prototype.notify=function(){this._subject.next()};t.getInstance=function(){if(!t._instance){t._instance=new t}return t._instance};return t}();var v=t("state_store_consumer",function(){function t(t){e(this,t);this.requests=[];this.subscription=null;this.request=o(this,"runopencode:store:consumer:request",7)}t.prototype.connectedCallback=function(){var t=this;this.requests=u(this.consumer);this.require();if(0===this.requests.length){return}this.subscription=y.getInstance().subscribe((function(){t.require()}))};t.prototype.disconnectedCallback=function(){if(this.subscription){this.subscription.unsubscribe();this.subscription=null}this.requests=[]};t.prototype.render=function(){return n("slot",null)};t.prototype.require=function(){var t=this;var e=[];this.requests.forEach((function(n){if(t.request.emit(n).defaultPrevented){e.push(n)}}));e.forEach((function(e){t.requests.splice(t.requests.indexOf(e),1)}));if(0===this.requests.length&&null!==this.subscription){this.subscription.unsubscribe();this.subscription=null}};return t}());var m=t("state_store_provider",function(){function t(t){e(this,t)}t.prototype.connectedCallback=function(){this.stores=a(this.provider);y.getInstance().notify()};t.prototype.onRequest=function(t){var e=t.detail;if(!this.stores.has(e.name)){return}t.stopPropagation();t.preventDefault();var n=this.stores.get(e.name);if(e.property){e.consumer[e.property]=n}if(e.method){e.method.apply(e.consumer,[n])}if(e.callback){e.callback.apply(e.consumer,[n])}};t.prototype.render=function(){return n("slot",null)};return t}())}}}));
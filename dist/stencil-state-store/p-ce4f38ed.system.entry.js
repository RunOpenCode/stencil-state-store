System.register(["./p-697dd1f7.system.js","./p-50e2b286.system.js"],(function(e){"use strict";var t,s,n,r,o,i,c,u,l,a;return{setters:[function(e){t=e.r;s=e.h;n=e.H;r=e.c;o=e.g},function(e){i=e.C;c=e.P;u=e.S;l=e.g;a=e.a}],execute:function(){var d=undefined&&undefined.__decorate||function(e,t,s,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,s):n,i;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,s,n);else for(var c=e.length-1;c>=0;c--)if(i=e[c])o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o;return r>3&&o&&Object.defineProperty(t,s,o),o};var h=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};const f=e("demo_consumer",class{constructor(e){t(this,e);this.prop=null;this.increase=async()=>{let e=await this.store;let t=e.snapshot();t.counter++;e.patch(t)}}async componentDidLoad(){let e=await this.store;this.subscription=e.subscribe(()=>{this.counter=e.snapshot().counter})}disconnectedCallback(){this.subscription.unsubscribe()}render(){return s(n,null,s("state-store-consumer",{consumer:this}),s("div",null,s("div",null,"Current value rendered from consumer component: ",s("span",null,this.counter)),s("div",null,s("button",{onClick:this.increase},"Increase counter from consumer"))))}});d([i("demo-store"),h("design:type",Promise)],f.prototype,"store",void 0);var p=undefined&&undefined.__decorate||function(e,t,s,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,s):n,i;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,s,n);else for(var c=e.length-1;c>=0;c--)if(i=e[c])o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o;return r>3&&o&&Object.defineProperty(t,s,o),o};var b=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};const m=e("demo_provider",class{constructor(e){t(this,e);this.increase=()=>{let e=this.store.snapshot();e.counter++;this.store.patch(e)}}connectedCallback(){this.subscription=this.store.subscribe(e=>{this.counter=e.counter})}disconnectedCallback(){this.subscription.unsubscribe()}render(){return s(n,null,s("state-store-provider",{provider:this}),s("slot",null),s("div",null,s("div",null,"Current value rendered from provider component: ",s("span",null,this.counter)),s("div",null,s("button",{onClick:this.increase},"Increase counter from provider"))))}});p([c({name:"demo-store",defaults:{counter:1}}),b("design:type",Object)],m.prototype,"store",void 0);class v{constructor(){this._subject=new u}subscribe(e){return this._subject.subscribe(e)}notify(){this._subject.next()}static getInstance(){if(!v._instance){v._instance=new v}return v._instance}}const y=e("state_store_consumer",class{constructor(e){t(this,e);this.requests=[];this.subscription=null;this.request=r(this,"runopencode:store:consumer:request",7)}connectedCallback(){this.requests=l(this.consumer);this.require();if(0===this.requests.length){return}this.subscription=v.getInstance().subscribe(()=>{this.require()})}disconnectedCallback(){if(this.subscription){this.subscription.unsubscribe();this.subscription=null}this.requests=[]}require(){let e=[];this.requests.forEach(t=>{if(this.request.emit(t).defaultPrevented){e.push(t)}});e.forEach(e=>{this.requests.splice(this.requests.indexOf(e),1)});if(0===this.requests.length&&null!==this.subscription){this.subscription.unsubscribe();this.subscription=null}}render(){return s(n,null,s("slot",null))}});const q=e("state_store_provider",class{constructor(e){t(this,e);this.onStoreRequested=e=>{let t=e.detail;if(!this.stores.has(t.name)){return}e.stopPropagation();e.preventDefault();let s=this.stores.get(t.name);t.consumer[t.property].resolve(s)}}connectedCallback(){let e=Array.from(this.el.childNodes).filter(e=>"#comment"!==e.nodeName);let t=0!==e.length;let s=this.el;if(!t){s=this.el.parentNode}s.addEventListener("runopencode:store:consumer:request",this.onStoreRequested);this.stores=a(this.provider);v.getInstance().notify()}disconnectedCallback(){this.el.removeEventListener("runopencode:store:consumer:request",this.onStoreRequested);this.el.parentElement.removeEventListener("runopencode:store:consumer:request",this.onStoreRequested)}render(){return s(n,null,s("slot",null))}get el(){return o(this)}})}}}));
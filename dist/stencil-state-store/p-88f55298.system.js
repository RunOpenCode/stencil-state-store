var __extends=this&&this.__extends||function(){var r=function(t,e){r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)if(t.hasOwnProperty(e))r[e]=t[e]};return r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();System.register([],function(r){"use strict";return{execute:function(){r({C:n,P:J,a:q,g:o});var t=function(){function r(r,t,e,n,o){this._name=r;this._consumer=t;this._property=e;this._method=n;this._callback=o}Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"consumer",{get:function(){return this._consumer},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"property",{get:function(){return this._property},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"method",{get:function(){return this._method},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"callback",{get:function(){return this._callback},enumerable:true,configurable:true});return r}();var e=Symbol("@runopencode:state:consume:requests");function n(r){return function t(n,o,s){r=Object.assign({callback:null},r);var u=Reflect.getMetadata(e,n)||[];var c=new i(r.name,o,r.callback,s?"method":"property");u.push(c);Reflect.defineMetadata(e,u,n)}}function o(r){var n=[];var o=Reflect.getMetadata(e,r);o.forEach(function(e){var o=e.callback;if("string"===typeof e.callback){o=r[e.callback]}var i=new t(e.name,r,"property"===e.type?e.property:null,"method"===e.type?r[e.property]:null,o);n.push(i)});return n}var i=function(){function r(r,t,e,n){this._name=r;this._property=t;this._callback=e;this._type=n}Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"property",{get:function(){return this._property},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"callback",{get:function(){return this._callback},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"type",{get:function(){return this._type},enumerable:true,configurable:true});return r}();function s(r){return typeof r==="function"}var u=false;var c={Promise:undefined,set useDeprecatedSynchronousErrorHandling(r){if(r){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else if(u){console.log("RxJS: Back to a better error behavior. Thank you. <3")}u=r},get useDeprecatedSynchronousErrorHandling(){return u}};function a(r){setTimeout(function(){throw r},0)}var f={closed:true,next:function(r){},error:function(r){if(c.useDeprecatedSynchronousErrorHandling){throw r}else{a(r)}},complete:function(){}};var p=Array.isArray||function(r){return r&&typeof r.length==="number"};function h(r){return r!==null&&typeof r==="object"}function l(r){Error.call(this);this.message=r?r.length+" errors occurred during unsubscription:\n"+r.map(function(r,t){return t+1+") "+r.toString()}).join("\n  "):"";this.name="UnsubscriptionError";this.errors=r;return this}l.prototype=Object.create(Error.prototype);var b=l;var y=function(){function r(r){this.closed=false;this._parentOrParents=null;this._subscriptions=null;if(r){this._unsubscribe=r}}r.prototype.unsubscribe=function(){var t;if(this.closed){return}var e=this,n=e._parentOrParents,o=e._unsubscribe,i=e._subscriptions;this.closed=true;this._parentOrParents=null;this._subscriptions=null;if(n instanceof r){n.remove(this)}else if(n!==null){for(var u=0;u<n.length;++u){var c=n[u];c.remove(this)}}if(s(o)){try{o.call(this)}catch(r){t=r instanceof b?d(r.errors):[r]}}if(p(i)){var u=-1;var a=i.length;while(++u<a){var f=i[u];if(h(f)){try{f.unsubscribe()}catch(r){t=t||[];if(r instanceof b){t=t.concat(d(r.errors))}else{t.push(r)}}}}}if(t){throw new b(t)}};r.prototype.add=function(t){var e=t;if(!t){return r.EMPTY}switch(typeof t){case"function":e=new r(t);case"object":if(e===this||e.closed||typeof e.unsubscribe!=="function"){return e}else if(this.closed){e.unsubscribe();return e}else if(!(e instanceof r)){var n=e;e=new r;e._subscriptions=[n]}break;default:{throw new Error("unrecognized teardown "+t+" added to Subscription.")}}var o=e._parentOrParents;if(o===null){e._parentOrParents=this}else if(o instanceof r){if(o===this){return e}e._parentOrParents=[o,this]}else if(o.indexOf(this)===-1){o.push(this)}else{return e}var i=this._subscriptions;if(i===null){this._subscriptions=[e]}else{i.push(e)}return e};r.prototype.remove=function(r){var t=this._subscriptions;if(t){var e=t.indexOf(r);if(e!==-1){t.splice(e,1)}}};return r}();y.EMPTY=function(r){r.closed=true;return r}(new y);function d(r){return r.reduce(function(r,t){return r.concat(t instanceof b?t.errors:t)},[])}var _=typeof Symbol==="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();var v=function(r){__extends(t,r);function t(e,n,o){var i=r.call(this)||this;i.syncErrorValue=null;i.syncErrorThrown=false;i.syncErrorThrowable=false;i.isStopped=false;switch(arguments.length){case 0:i.destination=f;break;case 1:if(!e){i.destination=f;break}if(typeof e==="object"){if(e instanceof t){i.syncErrorThrowable=e.syncErrorThrowable;i.destination=e;e.add(i)}else{i.syncErrorThrowable=true;i.destination=new w(i,e)}break}default:i.syncErrorThrowable=true;i.destination=new w(i,e,n,o);break}return i}t.prototype[_]=function(){return this};t.create=function(r,e,n){var o=new t(r,e,n);o.syncErrorThrowable=false;return o};t.prototype.next=function(r){if(!this.isStopped){this._next(r)}};t.prototype.error=function(r){if(!this.isStopped){this.isStopped=true;this._error(r)}};t.prototype.complete=function(){if(!this.isStopped){this.isStopped=true;this._complete()}};t.prototype.unsubscribe=function(){if(this.closed){return}this.isStopped=true;r.prototype.unsubscribe.call(this)};t.prototype._next=function(r){this.destination.next(r)};t.prototype._error=function(r){this.destination.error(r);this.unsubscribe()};t.prototype._complete=function(){this.destination.complete();this.unsubscribe()};t.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;this._parentOrParents=null;this.unsubscribe();this.closed=false;this.isStopped=false;this._parentOrParents=r;return this};return t}(y);var w=function(r){__extends(t,r);function t(t,e,n,o){var i=r.call(this)||this;i._parentSubscriber=t;var u;var c=i;if(s(e)){u=e}else if(e){u=e.next;n=e.error;o=e.complete;if(e!==f){c=Object.create(e);if(s(c.unsubscribe)){i.add(c.unsubscribe.bind(c))}c.unsubscribe=i.unsubscribe.bind(i)}}i._context=c;i._next=u;i._error=n;i._complete=o;return i}t.prototype.next=function(r){if(!this.isStopped&&this._next){var t=this._parentSubscriber;if(!c.useDeprecatedSynchronousErrorHandling||!t.syncErrorThrowable){this.__tryOrUnsub(this._next,r)}else if(this.__tryOrSetError(t,this._next,r)){this.unsubscribe()}}};t.prototype.error=function(r){if(!this.isStopped){var t=this._parentSubscriber;var e=c.useDeprecatedSynchronousErrorHandling;if(this._error){if(!e||!t.syncErrorThrowable){this.__tryOrUnsub(this._error,r);this.unsubscribe()}else{this.__tryOrSetError(t,this._error,r);this.unsubscribe()}}else if(!t.syncErrorThrowable){this.unsubscribe();if(e){throw r}a(r)}else{if(e){t.syncErrorValue=r;t.syncErrorThrown=true}else{a(r)}this.unsubscribe()}}};t.prototype.complete=function(){var r=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var e=function(){return r._complete.call(r._context)};if(!c.useDeprecatedSynchronousErrorHandling||!t.syncErrorThrowable){this.__tryOrUnsub(e);this.unsubscribe()}else{this.__tryOrSetError(t,e);this.unsubscribe()}}else{this.unsubscribe()}}};t.prototype.__tryOrUnsub=function(r,t){try{r.call(this._context,t)}catch(r){this.unsubscribe();if(c.useDeprecatedSynchronousErrorHandling){throw r}else{a(r)}}};t.prototype.__tryOrSetError=function(r,t,e){if(!c.useDeprecatedSynchronousErrorHandling){throw new Error("bad call")}try{t.call(this._context,e)}catch(t){if(c.useDeprecatedSynchronousErrorHandling){r.syncErrorValue=t;r.syncErrorThrown=true;return true}else{a(t);return true}}return false};t.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null;this._parentSubscriber=null;r.unsubscribe()};return t}(v);function g(r){while(r){var t=r.closed,e=r.destination,n=r.isStopped;if(t||n){return false}else if(e&&e instanceof v){r=e}else{r=null}}return true}function m(r,t,e){if(r){if(r instanceof v){return r}if(r[_]){return r[_]()}}if(!r&&!t&&!e){return new v(f)}return new v(r,t,e)}var E=typeof Symbol==="function"&&Symbol.observable||"@@observable";function S(){}function x(r){if(!r){return S}if(r.length===1){return r[0]}return function t(e){return r.reduce(function(r,t){return t(r)},e)}}var O=function(){function r(r){this._isScalar=false;if(r){this._subscribe=r}}r.prototype.lift=function(t){var e=new r;e.source=this;e.operator=t;return e};r.prototype.subscribe=function(r,t,e){var n=this.operator;var o=m(r,t,e);if(n){o.add(n.call(o,this.source))}else{o.add(this.source||c.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o))}if(c.useDeprecatedSynchronousErrorHandling){if(o.syncErrorThrowable){o.syncErrorThrowable=false;if(o.syncErrorThrown){throw o.syncErrorValue}}}return o};r.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){if(c.useDeprecatedSynchronousErrorHandling){r.syncErrorThrown=true;r.syncErrorValue=t}if(g(r)){r.error(t)}else{console.warn(t)}}};r.prototype.forEach=function(r,t){var e=this;t=j(t);return new t(function(t,n){var o;o=e.subscribe(function(t){try{r(t)}catch(r){n(r);if(o){o.unsubscribe()}}},n,t)})};r.prototype._subscribe=function(r){var t=this.source;return t&&t.subscribe(r)};r.prototype[E]=function(){return this};r.prototype.pipe=function(){var r=[];for(var t=0;t<arguments.length;t++){r[t]=arguments[t]}if(r.length===0){return this}return x(r)(this)};r.prototype.toPromise=function(r){var t=this;r=j(r);return new r(function(r,e){var n;t.subscribe(function(r){return n=r},function(r){return e(r)},function(){return r(n)})})};return r}();O.create=function(r){return new O(r)};function j(r){if(!r){r=Promise}if(!r){throw new Error("no Promise impl found")}return r}function P(){Error.call(this);this.message="object unsubscribed";this.name="ObjectUnsubscribedError";return this}P.prototype=Object.create(Error.prototype);var T=P;var k=function(r){__extends(t,r);function t(t,e){var n=r.call(this)||this;n.subject=t;n.subscriber=e;n.closed=false;return n}t.prototype.unsubscribe=function(){if(this.closed){return}this.closed=true;var r=this.subject;var t=r.observers;this.subject=null;if(!t||t.length===0||r.isStopped||r.closed){return}var e=t.indexOf(this.subscriber);if(e!==-1){t.splice(e,1)}};return t}(y);var D=function(r){__extends(t,r);function t(t){var e=r.call(this,t)||this;e.destination=t;return e}return t}(v);var M=function(r){__extends(t,r);function t(){var t=r.call(this)||this;t.observers=[];t.closed=false;t.isStopped=false;t.hasError=false;t.thrownError=null;return t}t.prototype[_]=function(){return new D(this)};t.prototype.lift=function(r){var t=new H(this,this);t.operator=r;return t};t.prototype.next=function(r){if(this.closed){throw new T}if(!this.isStopped){var t=this.observers;var e=t.length;var n=t.slice();for(var o=0;o<e;o++){n[o].next(r)}}};t.prototype.error=function(r){if(this.closed){throw new T}this.hasError=true;this.thrownError=r;this.isStopped=true;var t=this.observers;var e=t.length;var n=t.slice();for(var o=0;o<e;o++){n[o].error(r)}this.observers.length=0};t.prototype.complete=function(){if(this.closed){throw new T}this.isStopped=true;var r=this.observers;var t=r.length;var e=r.slice();for(var n=0;n<t;n++){e[n].complete()}this.observers.length=0};t.prototype.unsubscribe=function(){this.isStopped=true;this.closed=true;this.observers=null};t.prototype._trySubscribe=function(t){if(this.closed){throw new T}else{return r.prototype._trySubscribe.call(this,t)}};t.prototype._subscribe=function(r){if(this.closed){throw new T}else if(this.hasError){r.error(this.thrownError);return y.EMPTY}else if(this.isStopped){r.complete();return y.EMPTY}else{this.observers.push(r);return new k(this,r)}};t.prototype.asObservable=function(){var r=new O;r.source=this;return r};return t}(O);r("S",M);M.create=function(r,t){return new H(r,t)};var H=function(r){__extends(t,r);function t(t,e){var n=r.call(this)||this;n.destination=t;n.source=e;return n}t.prototype.next=function(r){var t=this.destination;if(t&&t.next){t.next(r)}};t.prototype.error=function(r){var t=this.destination;if(t&&t.error){this.destination.error(r)}};t.prototype.complete=function(){var r=this.destination;if(r&&r.complete){this.destination.complete()}};t.prototype._subscribe=function(r){var t=this.source;if(t){return this.source.subscribe(r)}else{return y.EMPTY}};return t}(M);var A=function(r){__extends(t,r);function t(t){var e=r.call(this)||this;e._value=t;return e}Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:true,configurable:true});t.prototype._subscribe=function(t){var e=r.prototype._subscribe.call(this,t);if(e&&!e.closed){t.next(this._value)}return e};t.prototype.getValue=function(){if(this.hasError){throw this.thrownError}else if(this.closed){throw new T}else{return this._value}};t.prototype.next=function(t){r.prototype.next.call(this,this._value=t)};return t}(M);function R(r,t){return function e(n){if(typeof r!=="function"){throw new TypeError("argument is not a function. Are you looking for `mapTo()`?")}return n.lift(new V(r,t))}}var V=function(){function r(r,t){this.project=r;this.thisArg=t}r.prototype.call=function(r,t){return t.subscribe(new U(r,this.project,this.thisArg))};return r}();var U=function(r){__extends(t,r);function t(t,e,n){var o=r.call(this,t)||this;o.project=e;o.count=0;o.thisArg=n||o;return o}t.prototype._next=function(r){var t;try{t=this.project.call(this.thisArg,r,this.count++)}catch(r){this.destination.error(r);return}this.destination.next(t)};return t}(v);var Y=function(){function r(r){if(r===void 0){r=null}this._snapshot=r;this._subject=new A(r)}Object.defineProperty(r.prototype,"observer",{get:function(){return this._subject.asObservable()},enumerable:true,configurable:true});r.prototype.select=function(r){return this._subject.pipe(R(r))};r.prototype.snapshot=function(){return this._snapshot};r.prototype.set=function(r){this._snapshot=r;this._subject.next(r)};r.prototype.patch=function(r){this._snapshot=Object.assign({},this._snapshot||{},r);this._subject.next(this._snapshot)};r.prototype.error=function(r){this._subject.error(r)};r.prototype.subscribe=function(r){return this._subject.subscribe(r)};return r}();var C=Symbol("@runopencode:state:provide:registry");function J(r){return function t(e,n){r=Object.assign({defaults:null},r);var o="__"+n+"__";delete e.constructor.prototype[n];Object.defineProperty(e.constructor.prototype,n,{configurable:true,enumerable:true,get:function(){if(!this[o]){Object.defineProperty(this,o,{value:new Y(r.defaults),enumerable:false,writable:false})}return this[o]}});var i=Reflect.getMetadata(C,e)||new Map;i.set(r.name,n);Reflect.defineMetadata(C,i,e)}}function q(r){var t=Reflect.getMetadata(C,r);var e=new Map;t.forEach(function(t,n){e.set(n,r[t])});return e}}}});